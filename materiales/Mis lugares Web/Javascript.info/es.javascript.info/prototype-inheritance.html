<!DOCTYPE html><html lang="es" data-theme-enabled="1">
<!-- Mirrored from es.javascript.info/prototype-inheritance by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Feb 2023 21:14:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><script>window.currentUser = null;</script><script>window.shopCurrency = "EUR";</script><script>window.localCurrency = "EUR";</script><script>window.countryCode = "us";</script><script>window.rateShopTo = {"EUR":1,"USD":1.0766800785115114,"AMD":432.27119525485557};</script><title itemprop="name">Herencia prototípica</title><link href="pack/styles.40bd864cfdb7b5d1a94b.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="prototype-inheritance.html"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="img/favicon/favicon.png"><meta itemprop="image" content="https://es.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Herencia prototípica"><meta property="og:image" content="https://es.javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Herencia prototípica"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://es.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="prototypes.html"><link rel="next" href="function-prototype.html"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="../www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="pack/init.da0cbf9711553523e21d.js"></script><script src="pack/head.d82dc89d7b800e91179f.js" defer></script><meta property="og:title" content="Herencia prototípica"><meta property="og:type" content="article"><script src="pack/tutorial.7967275b5846db2d02db.js" defer></script><script src="pack/footer.378d5659c5f335e3ee99.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">Lo sentimos, Internet Explorer no es compatible. Utilice un navegador más nuevo.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"ky","name":"Kyrgyz"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"ms","name":"Malay"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "es";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ES</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/prototype-inheritance"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://javascript.info/prototype-inheritance"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="prototype-inheritance.html"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fa.javascript.info/prototype-inheritance"><span class="supported-langs__brief">FA</span><span class="supported-langs__title">فارسی</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/prototype-inheritance"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/prototype-inheritance"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/prototype-inheritance"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/prototype-inheritance"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/prototype-inheritance"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/prototype-inheritance"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/prototype-inheritance"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/prototype-inheritance"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li></ul><ul class="supported-langs__list" style="height:20px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://zh.javascript.info/prototype-inheritance"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text"><p>Queremos que este proyecto de código abierto esté disponible para personas de todo el mundo.</p> <p><a href="https://javascript.info/translate">Ayuda a traducir</a> el contenido de este tutorial a tu idioma!</p>
</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="img/sitetoolbar__logo_en-white.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="img/sitetoolbar__logo_small_en-white.svg" width="70" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="ebook.html"><span class="buy-book-button__extra-text">Comprar</span>EPUB/PDF</a></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"/><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="https://es.javascript.info/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="Buscar en Javascript.info" required="required" type="text"/></div><button class="sitetoolbar__find" type="submit">Buscar</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="https://es.javascript.info/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Buscar en el tutorial" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Buscar</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Mapa del Tutorial</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"/><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Compartir</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/prototype-inheritance">عربي</option><option value="https://javascript.info/prototype-inheritance">English</option><option value="https://es.javascript.info/prototype-inheritance" selected>Español</option><option value="https://fa.javascript.info/prototype-inheritance">فارسی</option><option value="https://fr.javascript.info/prototype-inheritance">Français</option><option value="https://id.javascript.info/prototype-inheritance">Indonesia</option><option value="https://it.javascript.info/prototype-inheritance">Italiano</option><option value="https://ja.javascript.info/prototype-inheritance">日本語</option><option value="https://ko.javascript.info/prototype-inheritance">한국어</option><option value="https://learn.javascript.ru/prototype-inheritance">Русский</option><option value="https://tr.javascript.info/prototype-inheritance">Türkçe</option><option value="https://uk.javascript.info/prototype-inheritance">Українська</option><option value="https://zh.javascript.info/prototype-inheritance">简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="62" max="93" data-tooltip="Lección 62 de 93"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="index.html"><span class="breadcrumbs__hidden-text">Tutorial</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="js.html"><span>El lenguaje JavaScript</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="prototypes.html"><span>Prototipos y herencia</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial","item":"https://es.javascript.info/"},{"@type":"ListItem","position":2,"name":"El lenguaje JavaScript","item":"https://es.javascript.info/js"},{"@type":"ListItem","position":3,"name":"Prototipos y herencia","item":"https://es.javascript.info/prototypes"}]}</script></ol><div class="updated-at" data-tooltip="Última actualización el 4 de febrero de 2023"><div class="updated-at__content">4 de febrero de 2023</div></div></div><h1 class="main__header-title">Herencia prototípica</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Herencia prototípica"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>En programación, a menudo queremos tomar algo y extenderlo.</p>
<p>Por ejemplo: tenemos un objeto <code>user</code> con sus propiedades y métodos, y queremos hacer que <code>admin</code> y <code>guest</code> sean variantes ligeramente modificadas del mismo. Nos gustaría reutilizar lo que tenemos en <code>user</code>; no queremos copiar ni reimplementar sus métodos, sino solamente construir un nuevo objeto encima del existente.</p>
<p><em>La herencia de prototipos</em> es una característica del lenguaje que ayuda en eso.</p>
<h2><a class="main__anchor" name="prototype" href="#prototype">[[Prototype]]</a></h2><p>En JavaScript, los objetos tienen una propiedad oculta especial <code>[[Prototype]]</code> (como se menciona en la especificación); que puede ser <code>null</code>, o hacer referencia a otro objeto llamado “prototipo”:</p>
<figure><div class="image" style="width:191px">
      <div class="image__ratio" style="padding-top:78.53403141361257%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/object-prototype-empty.svg" width="191" height="150" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/object-prototype-empty.svg" alt="" width="191" height="150">
      </object>
      </div></figure><p>Cuando leemos una propiedad de <code>object</code>, si JavaScript no la encuentra allí la toma automáticamente del prototipo. En programación esto se llama “herencia prototípica”. Pronto estudiaremos muchos ejemplos de esta herencia y otras características interesantes del lenguaje que se basan en ella.</p>
<p>La propiedad <code>[[Prototype]]</code> es interna y está oculta, pero hay muchas formas de configurarla.</p>
<p>Una de ellas es usar el nombre especial <code>__proto__</code>, así:</p>
<div id="b3ojb2ee5l" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:7,&quot;end&quot;:7}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true
};
let rabbit = {
  jumps: true
};

rabbit.__proto__ = animal; // establece rabbit.[[Prototype]] = animal</code></pre>
        </div>
      </div>
      
      </div><p>Si buscamos una propiedad en <code>rabbit</code> y no se encuentra, JavaScript la toma automáticamente de <code>animal</code>.</p>
<p>Por ejemplo:</p>
<div id="d1rad9ffp6" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:10,&quot;end&quot;:10},{&quot;start&quot;:7,&quot;end&quot;:7}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true
};
let rabbit = {
  jumps: true
};

rabbit.__proto__ = animal; // (*)

// Ahora podemos encontrar ambas propiedades en conejo:
alert( rabbit.eats ); // verdadero (**)
alert( rabbit.jumps ); // verdadero</code></pre>
        </div>
      </div>
      
      </div><p>Aquí, la línea <code>(*)</code> establece que <code>animal</code> es el prototipo de <code>rabbit</code>.</p>
<p>Luego, cuando <code>alert</code> intenta leer la propiedad <code>rabbit.eats</code> <code>(**)</code>, no la encuentra en <code>rabbit</code>, por lo que JavaScript sigue la referencia <code>[[Prototype]]</code> y la encuentra en <code>animal</code> (busca de abajo hacia arriba):</p>
<figure><div class="image" style="width:191px">
      <div class="image__ratio" style="padding-top:78.53403141361257%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/proto-animal-rabbit.svg" width="191" height="150" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/proto-animal-rabbit.svg" alt="" width="191" height="150">
      </object>
      </div></figure><p>Aquí podemos decir que &quot;<code>animal</code> es el prototipo de <code>rabbit</code>&quot; o que &quot;<code>rabbit</code> hereda prototípicamente de <code>animal</code>&quot;.</p>
<p>Entonces, si <code>animal</code> tiene muchas propiedades y métodos útiles, estos estarán automáticamente disponibles en <code>rabbit</code>. Dichas propiedades se denominan “heredadas”.</p>
<p>Si tenemos un método en <code>animal</code>, se puede llamar en <code>rabbit</code>:</p>
<div id="y9djmy0c3q" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:13,&quot;end&quot;:13},{&quot;start&quot;:2,&quot;end&quot;:4}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true,
  walk() {
    alert(&quot;Animal da un paseo&quot;);
  }
};

let rabbit = {
  jumps: true,
  __proto__: animal
};

// walk es tomado del prototipo
rabbit.walk(); // Animal da un paseo</code></pre>
        </div>
      </div>
      
      </div><p>El método se toma automáticamente del prototipo, así:</p>
<figure><div class="image" style="width:205px">
      <div class="image__ratio" style="padding-top:84.39024390243902%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/proto-animal-rabbit-walk.svg" width="205" height="173" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/proto-animal-rabbit-walk.svg" alt="" width="205" height="173">
      </object>
      </div></figure><p>La cadena prototipo puede ser más larga:</p>
<div id="ip4qyx9qvk" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:14,&quot;end&quot;:14},{&quot;start&quot;:9,&quot;end&quot;:9}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true,
  walk() {
    alert(&quot;Animal da un paseo&quot;);
  }
};

let rabbit = {
  jumps: true,
  __proto__: animal
};

let longEar = {
  earLength: 10,
  __proto__: rabbit
};

// walk se toma de la cadena prototipo
longEar.walk(); // Animal da un paseo
alert(longEar.jumps); // verdadero (desde rabbit)</code></pre>
        </div>
      </div>
      
      </div><figure><div class="image" style="width:206px">
      <div class="image__ratio" style="padding-top:125.24271844660196%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/proto-animal-rabbit-chain.svg" width="206" height="258" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/proto-animal-rabbit-chain.svg" alt="" width="206" height="258">
      </object>
      </div></figure><p>Ahora, si leemos algo de <code>longEar</code> y falta, JavaScript lo buscará en <code>rabbit</code>, y luego en <code>animal</code>.</p>
<p>Solo hay dos limitaciones:</p>
<ol>
<li>No puede haber referencias circulares. JavaScript arrojará un error si intentamos asignar <code>__proto__</code> en círculo.</li>
<li>El valor de <code>__proto__</code> puede ser un objeto o <code>null</code>. Otros tipos son ignorados.</li>
</ol>
<p>También puede ser obvio, pero aún así: solo puede haber un <code>[[Prototype]]</code>. Un objeto no puede heredar desde dos.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>__proto__</code> es un getter/setter histórico para <code>[[Prototype]]</code></span></div>
            <div class="important__content"><p>Es un error común de principiantes no saber la diferencia entre ambos.</p>
<p>Tenga en cuenta que <code>__proto__</code> <em>no es lo mismo</em> que <code>[[Prototype]]</code>. <code>__proto__</code> es un getter/setter para <code>[[Prototype]]</code>. Más adelante veremos situaciones donde esto importa, por ahora solo tengámoslo en cuenta mientras vamos entendiendo el lenguaje JavaScript.</p>
<p>La propiedad <code>__proto__</code> es algo vetusta. Existe por razones históricas, el JavaScript moderno sugiere el uso de las funciones <code>Object.getPrototypeOf/Object.setPrototypeOf</code> en lugar de get/set del prototipo. Estudiaremos estas funciones más adelante.</p>
<p>Según la especificación, solamente los navegadores debería</p>
<p>n dar soporte a <code>__proto__</code>. Pero de hecho todos los entornos, incluyendo los del lado del servidor, soportan <code>__proto__</code>, así que es bastante seguro usarlo.</p>
<p>Como la notación <code>__proto__</code> es más intuitiva, la usaremos en los ejemplos.</p>
</div></div>
<h2><a class="main__anchor" name="la-escritura-no-usa-prototipo" href="#la-escritura-no-usa-prototipo">La escritura no usa prototipo</a></h2><p>El prototipo solo se usa para leer propiedades.</p>
<p>Las operaciones de escritura/eliminación funcionan directamente con el objeto.</p>
<p>En el ejemplo a continuación, asignamos su propio método <code>walk</code> a <code>rabbit</code>:</p>
<div id="9mt7s93x3s" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:11,&quot;end&quot;:13}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true,
  walk() {
    /* este método no será utilizado por rabbit */
  }
};

let rabbit = {
  __proto__: animal
};

rabbit.walk = function() {
  alert(&quot;¡Conejo! ¡Salta, salta!&quot;);
};

rabbit.walk(); // ¡Conejo! ¡Salta, salta!</code></pre>
        </div>
      </div>
      
      </div><p>De ahora en adelante, la llamada <code>rabbit.walk()</code> encuentra el método inmediatamente en el objeto y lo ejecuta, sin usar el prototipo:</p>
<figure><div class="image" style="width:202px">
      <div class="image__ratio" style="padding-top:85.64356435643565%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/proto-animal-rabbit-walk-2.svg" width="202" height="173" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/proto-animal-rabbit-walk-2.svg" alt="" width="202" height="173">
      </object>
      </div></figure><p>Las propiedades de acceso son una excepción, ya que la asignación es manejada por una función setter. Por lo tanto, escribir en una propiedad de este tipo es en realidad lo mismo que llamar a una función.</p>
<p>Por esa razón, <code>admin.fullName</code> funciona correctamente en el siguiente código:</p>
<div id="orjs39wxg5" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let user = {
  name: &quot;John&quot;,
  surname: &quot;Smith&quot;,

  set fullName(value) {
    [this.name, this.surname] = value.split(&quot; &quot;);
  },

  get fullName() {
    return `${this.name} ${this.surname}`;
  }
};

let admin = {
  __proto__: user,
  isAdmin: true
};

alert(admin.fullName); // John Smith (*)

// ¡Dispara el setter!
admin.fullName = &quot;Alice Cooper&quot;; // (**)

alert(admin.fullName); // Alice Cooper , estado de admin modificado
alert(user.fullName); // John Smith , estado de user protegido</code></pre>
        </div>
      </div>
      
      </div><p>Aquí, en la línea <code>(*)</code>, la propiedad <code>admin.fullName</code> tiene un getter en el prototipo <code>user</code>, entonces es llamado. Y en la línea <code>(**)</code>, la propiedad tiene un setter en el prototipo, por lo que es llamado.</p>
<h2><a class="main__anchor" name="el-valor-de-this" href="#el-valor-de-this">El valor de “this”</a></h2><p>Puede surgir una pregunta interesante en el ejemplo anterior: ¿cuál es el valor de <code>this</code> dentro de <code>set fullName(value)</code>? ¿Dónde están escritas las propiedades <code>this.name</code> y <code>this.surname</code>: en <code>user</code> o en <code>admin</code>?</p>
<p>La respuesta es simple: “this” no se ve afectado por los prototipos en absoluto.</p>
<p><strong>No importa dónde se encuentre el método: en un objeto o su prototipo. En una llamada al método, <code>this</code> es siempre el objeto antes del punto.</strong></p>
<p>Entonces, la llamada al setter <code>admin.fullName=</code> usa a <code>admin</code> como <code>this</code>, no a <code>user</code>.</p>
<p>Eso es realmente algo muy importante, porque podemos tener un gran objeto con muchos métodos y tener objetos que hereden de él. Y cuando los objetos heredados ejecutan los métodos heredados, modificarán solo sus propios estados, no el estado del gran objeto.</p>
<p>Por ejemplo, aquí <code>animal</code> representa un “método de almacenamiento”, y <code>rabbit</code> lo utiliza.</p>
<p>La llamada <code>rabbit.sleep()</code> establece <code>this.isSleeping</code> en el objeto <code>rabbit</code>:</p>
<div id="iszwoaha8n" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// animal tiene métodos
let animal = {
  walk() {
    if (!this.isSleeping) {
      alert(`Yo camino`);
    }
  },
  sleep() {
    this.isSleeping = true;
  }
};

let rabbit = {
  name: &quot;Conejo Blanco&quot;,
  __proto__: animal
};

// modifica rabbit.isSleeping
rabbit.sleep();

alert(rabbit.isSleeping); // Verdadero
alert(animal.isSleeping); // undefined (no existe tal propiedad en el prototipo)</code></pre>
        </div>
      </div>
      
      </div><p>La imagen resultante:</p>
<figure><div class="image" style="width:206px">
      <div class="image__ratio" style="padding-top:92.23300970873787%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/proto-animal-rabbit-walk-3.svg" width="206" height="190" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/proto-animal-rabbit-walk-3.svg" alt="" width="206" height="190">
      </object>
      </div></figure><p>Si tuviéramos otros objetos (como <code>bird</code>, <code>snake</code>, etc.) heredados de <code>animal</code>, también tendrían acceso a los métodos de <code>animal</code>. Pero <code>this</code> en cada llamada al método sería el objeto correspondiente, evaluado en el momento de la llamada (antes del punto), no <code>animal</code>. Entonces, cuando escribimos datos en <code>this</code>, se almacenan en estos objetos.</p>
<p>Como resultado, los métodos se comparten, pero el estado del objeto no.</p>
<h2><a class="main__anchor" name="bucle-for-in" href="#bucle-for-in">Bucle for…in</a></h2><p>El bucle <code>for..in</code> también itera sobre las propiedades heredadas.</p>
<p>Por ejemplo:</p>
<div id="8epjafy7gb" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:12,&quot;end&quot;:13},{&quot;start&quot;:9,&quot;end&quot;:10}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true
};

let rabbit = {
  jumps: true,
  __proto__: animal
};

// Object.keys solo devuelve claves propias
alert(Object.keys(rabbit)); // jumps

// for..in recorre las claves propias y heredadas
for(let prop in rabbit) alert(prop); // jumps, después eats</code></pre>
        </div>
      </div>
      
      </div><p>Si no queremos eso, y quisiéramos excluir las propiedades heredadas, hay un método incorporado <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/hasOwnProperty">obj.hasOwnProperty(key)</a> (“Own” significa “Propia”): devuelve <code>true</code> si <code>obj</code> tiene la propiedad interna (no heredada) llamada <code>key</code>.</p>
<p>Entonces podemos filtrar las propiedades heredadas (o hacer algo más con ellas):</p>
<div id="7cz412qtjx" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eats: true
};

let rabbit = {
  jumps: true,
  __proto__: animal
};

for(let prop in rabbit) {
  let isOwn = rabbit.hasOwnProperty(prop);

  if (isOwn) {
    alert(`Es nuestro: ${prop}`); // Es nuestro: jumps
  } else {
    alert(`Es heredado: ${prop}`); // Es heredado: eats
  }
}</code></pre>
        </div>
      </div>
      
      </div><p>Aquí tenemos la siguiente cadena de herencia: <code>rabbit</code> hereda de <code>animal</code>, que hereda de <code>Object.prototype</code> (porque <code>animal</code> es un objeto <code>{...}</code> literal, entonces es por defecto), y luego <code>null</code> encima de él:</p>
<figure><div class="image" style="width:233px">
      <div class="image__ratio" style="padding-top:147.6394849785408%"></div>
      <object type="image/svg+xml" data="article/prototype-inheritance/rabbit-animal-object.svg" width="233" height="344" class="image__image" data-use-theme>
        <img src="article/prototype-inheritance/rabbit-animal-object.svg" alt="" width="233" height="344">
      </object>
      </div></figure><p>Observa algo curioso. ¿De dónde viene el método <code>rabbit.hasOwnProperty</code>? No lo definimos. Mirando la cadena podemos ver que el método es proporcionado por <code>Object.prototype.hasOwnProperty</code>. En otras palabras, se hereda.</p>
<p>Pero… ¿por qué <code>hasOwnProperty</code> no aparece en el bucle <code>for..in</code> como <code>eats</code> y <code>jumps</code>, si <code>for..in</code> enumera las propiedades heredadas?</p>
<p>La respuesta es simple: no es enumerable. Al igual que todas las demás propiedades de <code>Object.prototype</code>, tiene la bandera <code>enumerable: false</code>. Y <code>for..in</code> solo enumera las propiedades enumerables. Es por eso que este y el resto de las propiedades de <code>Object.prototype</code> no están en la lista.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">Casi todos los demás métodos de obtención de valor/clave ignoran las propiedades heredadas</span></div>
            <div class="important__content"><p>Casi todos los demás métodos de obtención de valores/claves, como <code>Object.keys</code>, <code>Object.values</code>, etc., ignoran las propiedades heredadas.</p>
<p>Solo operan en el objeto mismo. Las propiedades del prototipo <em>no</em> se tienen en cuenta.</p>
</div></div>
<h2><a class="main__anchor" name="resumen" href="#resumen">Resumen</a></h2><ul>
<li>En JavaScript, todos los objetos tienen una propiedad oculta <code>[[Prototype]]</code> que es: otro objeto, o <code>null</code>.</li>
<li>Podemos usar <code>obj.__proto__</code> para acceder a ella (un getter/setter histórico, también hay otras formas que se cubrirán pronto).</li>
<li>El objeto al que hace referencia <code>[[Prototype]]</code> se denomina “prototipo”.</li>
<li>Si en <code>obj</code> queremos leer una propiedad o llamar a un método que no existen, entonces JavaScript intenta encontrarlos en el prototipo.</li>
<li>Las operaciones de escritura/eliminación actúan directamente sobre el objeto, no usan el prototipo (suponiendo que sea una propiedad de datos, no un setter).</li>
<li>Si llamamos a <code>obj.method()</code>, y <code>method</code> se toma del prototipo, <code>this</code> todavía hace referencia a <code>obj</code>. Por lo tanto, los métodos siempre funcionan con el objeto actual, incluso si se heredan.</li>
<li>El bucle <code>for..in</code> itera sobre las propiedades propias y heredadas. Todos los demás métodos de obtención de valor/clave solo operan en el objeto mismo.</li>
</ul>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">Tareas</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#trabajando-con-prototipo" name="trabajando-con-prototipo">Trabajando con prototipo</a></h3><a class="task__open-link" href="task/property-after-delete.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Qué tan importante es la tarea, del 1 a 5">importancia: 5</span></div><div class="task__content"><div class="task__formatted"><p>Aquí está el código que crea un par de objetos, luego los modifica.</p>
<p>¿Qué valores se muestran en el proceso?</p>
<div id="you31x1j5p" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  jumps: null
};
let rabbit = {
  __proto__: animal,
  jumps: true
};

alert( rabbit.jumps ); // ? (1)

delete rabbit.jumps;

alert( rabbit.jumps ); // ? (2)

delete animal.jumps;

alert( rabbit.jumps ); // ? (3)</code></pre>
        </div>
      </div>
      
      </div><p>Debería haber 3 respuestas.</p>
</div><button class="task__solution" type="button">solución</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><ol>
<li><code>true</code>, tomado de <code>rabbit</code>.</li>
<li><code>null</code>, tomado de <code>animal</code>.</li>
<li><code>undefined</code>, ya no existe tal propiedad.</li>
</ol>
</div></div><button class="close-button task__answer-close" type="button" title="cerrar"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#algoritmo-de-busqueda" name="algoritmo-de-busqueda">Algoritmo de búsqueda</a></h3><a class="task__open-link" href="task/search-algorithm.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Qué tan importante es la tarea, del 1 a 5">importancia: 5</span></div><div class="task__content"><div class="task__formatted"><p>La tarea tiene dos partes.</p>
<p>Dados los siguientes objetos:</p>
<div id="yo411hx3ha" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let head = {
  glasses: 1
};

let table = {
  pen: 3
};

let bed = {
  sheet: 1,
  pillow: 2
};

let pockets = {
  money: 2000
};</code></pre>
        </div>
      </div>
      
      </div><ol>
<li>Use <code>__proto__</code> para asignar prototipos de manera que cualquier búsqueda de propiedades siga la ruta: <code>pockets</code> → <code>bed</code> → <code>table</code> →  <code>head</code>. Por ejemplo, <code>pockets.pen</code> debería ser<code>3</code> (que se encuentra en <code>table</code>), y <code>bed.glasses</code> debería ser <code>1</code> (que se encuentra en <code>head</code>).</li>
<li>Responda la pregunta: ¿es más rápido obtener <code>glasses</code> como <code>pockets.glasses</code> o <code>head.glasses</code>? Referencie si es necesario.</li>
</ol>
</div><button class="task__solution" type="button">solución</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><ol>
<li>
<p>Agreguemos <code>__proto__</code>:</p>
<div id="f072i4pjto" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let head = {
  glasses: 1
};

let table = {
  pen: 3,
  __proto__: head
};

let bed = {
  sheet: 1,
  pillow: 2,
  __proto__: table
};

let pockets = {
  money: 2000,
  __proto__: bed
};

alert( pockets.pen ); // 3
alert( bed.glasses ); // 1
alert( table.money ); // undefined</code></pre>
        </div>
      </div>
      
      </div></li>
<li>
<p>En los motores modernos, no hay diferencia de rendimiento si tomamos una propiedad de un objeto o de su prototipo. Recuerdan dónde se encontró la propiedad y la reutilizan en la siguiente solicitud.</p>
<p>Por ejemplo, para <code>pockets.glasses</code> recuerdan dónde encontraron <code>glasses</code> (en <code>head</code>), y la próxima vez buscarán allí. También son lo suficientemente inteligentes como para actualizar cachés internos si algo cambia, de modo que la optimización sea segura.</p>
</li>
</ol>
</div></div><button class="close-button task__answer-close" type="button" title="cerrar"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#donde-escribe" name="donde-escribe">¿Donde escribe?</a></h3><a class="task__open-link" href="task/proto-and-this.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Qué tan importante es la tarea, del 1 a 5">importancia: 5</span></div><div class="task__content"><div class="task__formatted"><p>Tenemos <code>rabbit</code> heredando de <code>animal</code>.</p>
<p>Si llamamos a <code>rabbit.eat()</code>, ¿qué objeto recibe la propiedad <code>full</code>: <code>animal</code> o <code>rabbit</code>?</p>
<div id="420mjdv9of" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let animal = {
  eat() {
    this.full = true;
  }
};

let rabbit = {
  __proto__: animal
};

rabbit.eat();</code></pre>
        </div>
      </div>
      
      </div></div><button class="task__solution" type="button">solución</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p><strong>La respuesta es: <code>rabbit</code>.</strong></p>
<p>Esto se debe a que <code>this</code> es un objeto antes del punto, por lo que <code>rabbit.eat()</code> modifica <code>rabbit</code>.</p>
<p>La búsqueda y ejecución de propiedades son dos cosas diferentes.</p>
<p>El método <code>rabbit.eat</code> se encuentra primero en el prototipo, luego se ejecuta con <code>this = rabbit</code>.</p>
</div></div><button class="close-button task__answer-close" type="button" title="cerrar"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#por-que-estan-llenos-los-dos-hamsters" name="por-que-estan-llenos-los-dos-hamsters">¿Por qué están llenos los dos hámsters?</a></h3><a class="task__open-link" href="task/hamster-proto.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Qué tan importante es la tarea, del 1 a 5">importancia: 5</span></div><div class="task__content"><div class="task__formatted"><p>Tenemos dos hámsters: <code>speedy</code> y <code>lazy</code> heredando del objeto <code>hamster</code> general.</p>
<p>Cuando alimentamos a uno de ellos, el otro también está lleno. ¿Por qué? ¿Cómo podemos arreglarlo?</p>
<div id="l3d0raup9p" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let hamster = {
  stomach: [],

  eat(food) {
    this.stomach.push(food);
  }
};

let speedy = {
  __proto__: hamster
};

let lazy = {
  __proto__: hamster
};

// Este encontró la comida
speedy.eat(&quot;manzana&quot;);
alert( speedy.stomach ); // manzana

// Este también lo tiene, ¿por qué? arreglar por favor.
alert( lazy.stomach ); // manzana</code></pre>
        </div>
      </div>
      
      </div></div><button class="task__solution" type="button">solución</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>Echemos un vistazo a lo que sucede en la llamada <code>speedy.eat(&quot;manzana&quot;)</code>.</p>
<ol>
<li>
<p>El método <code>speedy.eat</code> se encuentra en el prototipo (<code>=hamster</code>), luego se ejecuta con <code>this=speedy</code> (el objeto antes del punto).</p>
</li>
<li>
<p>Entonces <code>this.stomach.push()</code> necesita encontrar la propiedad <code>stomach</code> y llamar a <code>push</code> sobre ella. Busca <code>stomach</code> en <code>this</code> (<code>=speedy</code>), pero no lo encuentra.</p>
</li>
<li>
<p>Luego la búsqueda sigue la cadena del prototipo y encuentra <code>stomach</code> en <code>hamster</code>.</p>
</li>
<li>
<p>Luego se llama ‘push’ en él, agregando la comida en <em>el stomach del prototipo</em>.</p>
</li>
</ol>
<p>¡Así que todos los hámsters comparten un solo estómago!</p>
<p>Tanto para <code>lazy.stomach.push(...)</code> como para <code>speedy.stomach.push ()</code>, la propiedad <code>stomach</code> se encuentra en el prototipo (ya que no está en el objeto mismo), entonces los nuevos datos son empujados dentro.</p>
<p>Tenga en cuenta que tal cosa no sucede en caso de una asignación simple <code>this.stomach=</code>:</p>
<div id="8y2pj1yhk7" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:4,&quot;end&quot;:5}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let hamster = {
  stomach: [],

  eat(food) {
    // asigna a this.stomach en lugar de this.stomach.push
    this.stomach = [food];
  }
};

let speedy = {
   __proto__: hamster
};

let lazy = {
  __proto__: hamster
};

// Speedy encontró la comida
speedy.eat(&quot;manzana&quot;);
alert( speedy.stomach ); // manzana

// El estomago de Lazy está vacío
alert( lazy.stomach ); // &lt;nada&gt;</code></pre>
        </div>
      </div>
      
      </div><p>Ahora todo funciona bien, porque <code>this.stomach =</code> no realiza una búsqueda de <code>stomach</code>. El valor se escribe directamente en el objeto <code>this</code>.</p>
<p>También podemos evitar totalmente el problema asegurándonos de que cada hámster tenga su propio estómago:</p>
<div id="e8zmtaivdl" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:15,&quot;end&quot;:15},{&quot;start&quot;:10,&quot;end&quot;:10}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let hamster = {
  stomach: [],

  eat(food) {
    this.stomach.push(food);
  }
};

let speedy = {
  __proto__: hamster,
  stomach: []
};

let lazy = {
  __proto__: hamster,
  stomach: []
};

// Speedy encontró la comida
speedy.eat(&quot;manzana&quot;);
alert( speedy.stomach ); // manzana

// El estómago de Lazy está vacío
alert( lazy.stomach ); // &lt;nada&gt;</code></pre>
        </div>
      </div>
      
      </div><p>Ls solución general es: todas las propiedades que describen el estado de un objeto en particular, como el “stomach” anterior, deben escribirse en ese objeto. Eso evita tales problemas.</p>
</div></div><button class="close-button task__answer-close" type="button" title="cerrar"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="prototypes.html" data-tooltip="Prototipos y herencia"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Lección anterior</span></a><a class="page__nav page__nav_next" href="function-prototype.html" data-tooltip="F.prototype"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Próxima lección</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Compartir</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Mapa del Tutorial</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">Comentarios</a></h2><div class="comments__read-before"><span class="comments__read-before-link">lea esto antes de comentar…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>Si tiene sugerencias sobre qué mejorar, por favor <a href="https://github.com/javascript-tutorial/en.javascript.info/issues/new">enviar una propuesta de GitHub</a> o una solicitud de extracción en lugar de comentar.</li><li>Si no puede entender algo en el artículo, por favor explique.</li><li>Para insertar algunas palabras de código, use la etiqueta <code>&lt;code&gt;</code>, para varias líneas – envolverlas en la etiqueta <code>&lt;pre&gt;</code>, para más de 10 líneas – utilice una entorno controlado (sandbox) (<a href='https://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='https://jsbin.com/'>jsbin</a>, <a href='http://codepen.io/'>codepen</a>…)</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/es.javascript.info\/prototype-inheritance","identifier":"\/prototype-inheritance"}); };</script><script>var disqus_shortname = "es-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="tutorial/map.html" data-action="tutorial-map" data-tooltip="Mapa del Tutorial"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Capítulo</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="prototypes.html">Prototipos y herencia</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Navegación de lección</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#prototype">[[Prototype]]</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#la-escritura-no-usa-prototipo">La escritura no usa prototipo</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#el-valor-de-this">El valor de “this”</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#bucle-for-in">Bucle for…in</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#resumen">Resumen</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">Tareas (4)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">Comentarios</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Compartir</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fes.javascript.info%2Fprototype-inheritance" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/es.javascript.info/blob/master/1-js/08-prototypes/01-prototype-inheritance" rel="nofollow">Editar en GitHub</a></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2023&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="about.html">acerca del proyecto</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="about.html#contact-us">contáctenos</a></li></ul></div></body>
<!-- Mirrored from es.javascript.info/prototype-inheritance by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Feb 2023 21:14:08 GMT -->
</html>