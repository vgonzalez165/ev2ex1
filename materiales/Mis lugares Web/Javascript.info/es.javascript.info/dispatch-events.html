<!DOCTYPE html><html lang="es" data-theme-enabled="1">
<!-- Mirrored from es.javascript.info/dispatch-events by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Feb 2023 21:14:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><script>window.currentUser = null;</script><script>window.shopCurrency = "EUR";</script><script>window.localCurrency = "EUR";</script><script>window.countryCode = "es";</script><script>window.rateShopTo = {"EUR":1,"USD":1.0766800785115114,"AMD":432.27119525485557};</script><title itemprop="name">Envío de eventos personalizados</title><link href="pack/styles.40bd864cfdb7b5d1a94b.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="dispatch-events.html"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="img/favicon/favicon.png"><meta itemprop="image" content="https://es.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Envío de eventos personalizados"><meta property="og:image" content="https://es.javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Envío de eventos personalizados"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://es.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="default-browser-action.html"><link rel="next" href="event-details.html"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="../www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="pack/init.da0cbf9711553523e21d.js"></script><script src="pack/head.d82dc89d7b800e91179f.js" defer></script><meta property="og:title" content="Envío de eventos personalizados"><meta property="og:type" content="article"><script src="pack/tutorial.7967275b5846db2d02db.js" defer></script><script src="pack/footer.378d5659c5f335e3ee99.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">Lo sentimos, Internet Explorer no es compatible. Utilice un navegador más nuevo.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"ky","name":"Kyrgyz"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"ms","name":"Malay"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "es";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ES</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://javascript.info/dispatch-events"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="dispatch-events.html"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fa.javascript.info/"><span class="supported-langs__brief">FA</span><span class="supported-langs__title">فارسی</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/dispatch-events"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/dispatch-events"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/dispatch-events"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/dispatch-events"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/dispatch-events"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/dispatch-events"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/dispatch-events"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li></ul><ul class="supported-langs__list" style="height:20px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://zh.javascript.info/dispatch-events"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text"><p>Queremos que este proyecto de código abierto esté disponible para personas de todo el mundo.</p> <p><a href="https://javascript.info/translate">Ayuda a traducir</a> el contenido de este tutorial a tu idioma!</p>
</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="img/sitetoolbar__logo_en-white.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="img/sitetoolbar__logo_small_en-white.svg" width="70" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="ebook.html"><span class="buy-book-button__extra-text">Comprar</span>EPUB/PDF</a></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"/><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="https://es.javascript.info/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="Buscar en Javascript.info" required="required" type="text"/></div><button class="sitetoolbar__find" type="submit">Buscar</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="https://es.javascript.info/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Buscar en el tutorial" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Buscar</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Mapa del Tutorial</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"/><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Compartir</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/">عربي</option><option value="https://javascript.info/dispatch-events">English</option><option value="https://es.javascript.info/dispatch-events" selected>Español</option><option value="https://fa.javascript.info/">فارسی</option><option value="https://fr.javascript.info/dispatch-events">Français</option><option value="https://id.javascript.info/">Indonesia</option><option value="https://it.javascript.info/dispatch-events">Italiano</option><option value="https://ja.javascript.info/dispatch-events">日本語</option><option value="https://ko.javascript.info/dispatch-events">한국어</option><option value="https://learn.javascript.ru/dispatch-events">Русский</option><option value="https://tr.javascript.info/dispatch-events">Türkçe</option><option value="https://uk.javascript.info/dispatch-events">Українська</option><option value="https://zh.javascript.info/dispatch-events">简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="16" max="32" data-tooltip="Lección 16 de 32"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="index.html"><span class="breadcrumbs__hidden-text">Tutorial</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="ui.html"><span>El navegador: Documentos, Eventos e Interfaces</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="events.html"><span>Introducción a los eventos</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial","item":"https://es.javascript.info/"},{"@type":"ListItem","position":2,"name":"El navegador: Documentos, Eventos e Interfaces","item":"https://es.javascript.info/ui"},{"@type":"ListItem","position":3,"name":"Introducción a los eventos","item":"https://es.javascript.info/events"}]}</script></ol><div class="updated-at" data-tooltip="Última actualización el 24 de octubre de 2022"><div class="updated-at__content">24 de octubre de 2022</div></div></div><h1 class="main__header-title">Envío de eventos personalizados</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Envío de eventos personalizados"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>No solo podemos asignar controladores, sino también generar eventos desde JavaScript.</p>
<p>Los eventos personalizados se pueden utilizar para crear “componentes gráficos”. Por ejemplo, un elemento raíz de nuestro propio menú basado en JS puede desencadenar eventos que indiquen lo que sucede con el menú: <code>abrir</code> (menú abierto),<code>seleccionar</code> (se selecciona un elemento) y así sucesivamente. Otro código puede escuchar los eventos y observar lo que sucede con el menú.</p>
<p>No solo podemos generar eventos completamente nuevos, que inventamos para nuestros propios fines, sino también eventos integrados, como <code>click</code>, <code>mousedown</code>, etc. Eso puede ser útil para las pruebas automatizadas.</p>
<h2><a class="main__anchor" name="constructor-de-eventos" href="#constructor-de-eventos">Constructor de eventos</a></h2><p>Las clases de eventos integradas forman una jerarquía, similar a las clases de elementos DOM. La raíz es la clase incorporada <a href="https://dom.spec.whatwg.org/#events">Event</a>.</p>
<p>Podemos crear objetos <code>Event</code> así:</p>
<div id="watk5o602n" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let event = new Event(type[, options]);</code></pre>
        </div>
      </div>
      
      </div><p>Argumentos:</p>
<ul>
<li>
<p><em>type</em> – tipo de event, un string como <code>&quot;click&quot;</code> o nuestro propio evento como <code>&quot;mi-evento&quot;</code>.</p>
</li>
<li>
<p><em>options</em> – el objeto con 2 propiedades opcionales:</p>
<ul>
<li><code>bubbles: true/false</code> – si es <code>true</code>, entonces el evento se propaga.</li>
<li><code>cancelable: true/false</code> – si es <code>true</code>, entonces la “acción predeterminada” puede ser prevenida. Más adelante veremos qué significa para los eventos personalizados.</li>
</ul>
<p>Por defecto, los dos son false: <code>{bubbles: false, cancelable: false}</code>.</p>
</li>
</ul>
<h2><a class="main__anchor" name="dispatchevent" href="#dispatchevent">dispatchEvent</a></h2><p>Después de que se crea un objeto de evento, debemos “ejecutarlo” en un elemento usando la llamada <code>elem.dispatchEvent(event)</code>.</p>
<p>Luego, los controladores reaccionan como si fuera un evento normal del navegador. Si el evento fue creado con la bandera <code>bubbles</code>, entonces se propaga.</p>
<p>En el siguiente ejemplo, el evento <code>click</code> se inicia en JavaScript. El controlador funciona de la misma manera que si se hiciera clic en el botón:</p>
<div id="jnjof2gcou" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;button id=&quot;elem&quot; onclick=&quot;alert('Clic!');&quot;&gt;Click automático&lt;/button&gt;

&lt;script&gt;
  let event = new Event(&quot;click&quot;);
  elem.dispatchEvent(event);
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><div class="important important_smart">
            <div class="important__header"><span class="important__type">event.isTrusted</span></div>
            <div class="important__content"><p>Hay una forma de diferenciar un evento de usuario “real” de uno generado por script.</p>
<p>La propiedad <code>event.isTrusted</code> es <code>true</code> para eventos que provienen de acciones de usuarios reales y <code>false</code> para eventos generados por script.</p>
</div></div>
<h2><a class="main__anchor" name="ejemplo-de-bubbling" href="#ejemplo-de-bubbling">Ejemplo de Bubbling</a></h2><p>Podemos crear un evento bubbling con el nombre <code>&quot;hello&quot;</code> y capturarlo en <code>document</code>.</p>
<p>Todo lo que necesitamos es establecer <code>bubbles</code> en <code>true</code>:</p>
<div id="yn5ix2fqmb" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;h1 id=&quot;elem&quot;&gt;Hola desde el script!&lt;/h1&gt;

&lt;script&gt;
  // Captura en document...
  document.addEventListener(&quot;hello&quot;, function(event) { // (1)
    alert(&quot;Hola desde &quot; + event.target.tagName); // Hola desde H1
  });

  // ...Envío en elem!
  let event = new Event(&quot;hello&quot;, {bubbles: true}); // (2)
  elem.dispatchEvent(event);

// el controlador del documento se activará y mostrará el mensaje.

&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>Notas:</p>
<ol>
<li>Debemos usar <code>addEventListener</code> para nuestros eventos personalizados, porque <code>on&lt;event&gt;</code> solo existe para eventos incorporados, <code>document.onhello</code> no funciona.</li>
<li>Debes poner <code>bubbles:true</code>, de otra manera el evento no se propagará.</li>
</ol>
<p>La mecánica de bubbling es la misma para los eventos integrados (<code>click</code>) y personalizados (<code>hello</code>). También hay etapas de captura y propagación.</p>
<h2><a class="main__anchor" name="mouseevent-keyboardevent-y-otros" href="#mouseevent-keyboardevent-y-otros">MouseEvent, KeyboardEvent y otros</a></h2><p>Aquí hay una breve lista de clases para eventos UI (interfaz de usuario) de la <a href="https://www.w3.org/TR/uievents">especificación de eventos UI</a>:</p>
<ul>
<li><code>UIEvent</code></li>
<li><code>FocusEvent</code></li>
<li><code>MouseEvent</code></li>
<li><code>WheelEvent</code></li>
<li><code>KeyboardEvent</code></li>
<li>…</li>
</ul>
<p>Deberíamos usarlos en lugar de <code>new Event</code> si queremos crear tales eventos. Por ejemplo, <code>new MouseEvent(&quot;click&quot;)</code>.</p>
<p>El constructor correcto permite especificar propiedades estándar para ese tipo de evento.</p>
<p>Como <code>clientX/clientY</code> para un evento de mouse:</p>
<div id="minzjp6ac6" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:7,&quot;end&quot;:7}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let event = new MouseEvent(&quot;click&quot;, {
  bubbles: true,
  cancelable: true,
  clientX: 100,
  clientY: 100
});

alert(event.clientX); // 100</code></pre>
        </div>
      </div>
      
      </div><p>Tenga en cuenta: el constructor genérico <code>Event</code> no lo permite.</p>
<p>Intentemos:</p>
<div id="fbknwanhg2" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:7,&quot;end&quot;:7}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="ejecutar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let event = new Event(&quot;click&quot;, {
  bubbles: true, // solo bubbles y cancelable
  cancelable: true, // funcionan en el constructor de Event
  clientX: 100,
  clientY: 100
});

alert(event.clientX); // undefined, se ignora la propiedad desconocida!</code></pre>
        </div>
      </div>
      
      </div><p>Técnicamente, podemos solucionarlo asignando directamente <code>event.clientX=100</code> después de la creación. Entonces eso es una cuestión de conveniencia y de seguir las reglas. Los eventos generados por el navegador siempre tienen el tipo correcto.</p>
<p>La lista completa de propiedades para diferentes eventos de UI se encuentra en la especificación, por ejemplo, <a href="https://www.w3.org/TR/uievents/#mouseevent">MouseEvent</a>.</p>
<h2><a class="main__anchor" name="eventos-personalizados" href="#eventos-personalizados">Eventos personalizados</a></h2><p>Para nuestros tipos de eventos completamente nuevos, como <code>&quot;hello&quot;</code>, deberíamos usar <code>new CustomEvent</code>. Técnicamente, <a href="https://dom.spec.whatwg.org/#customevent">CustomEvent</a> es lo mismo que <code>Event</code>, con una excepción.</p>
<p>En el segundo argumento (objeto) podemos agregar una propiedad adicional <code>detail</code> para cualquier información personalizada que queramos pasar con el evento.</p>
<p>Por ejemplo:</p>
<div id="puq15s1xa8" data-trusted="1" class="code-example" data-refresh="1" data-highlight="[{&quot;start&quot;:9,&quot;end&quot;:9},{&quot;start&quot;:5,&quot;cols&quot;:[{&quot;start&quot;:10,&quot;end&quot;:27}]}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;h1 id=&quot;elem&quot;&gt;Hola para John!&lt;/h1&gt;

&lt;script&gt;
  // detalles adicionales que vienen con el evento para el controlador.
  elem.addEventListener(&quot;hello&quot;, function(event) {
    alert(event.detail.name);
  });

  elem.dispatchEvent(new CustomEvent(&quot;hello&quot;, {
    detail: { name: &quot;John&quot; }
  }));
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>La propiedad <code>detail</code> puede tener cualquier dato. Técnicamente podríamos vivir sin él, porque podemos asignar cualquier propiedad a un objeto <code>new Event</code> regular después de su creación. Pero <code>CustomEvent</code> proporciona el campo especial <code>detail</code> para evitar conflictos con otras propiedades del evento.</p>
<p>Además, la clase de evento describe “qué tipo de evento” es, y si el evento es personalizado, entonces deberíamos usar <code>CustomEvent</code> solo para tener claro qué es.</p>
<h2><a class="main__anchor" name="event-preventdefault" href="#event-preventdefault">event.preventDefault()</a></h2><p>Muchos eventos del navegador tienen una “acción predeterminada”, como ir a un enlace, iniciar una selección, etc.</p>
<p>Para eventos nuevos y personalizados, definitivamente no hay acciones predeterminadas del navegador, pero un código que distribuye dicho evento puede tener sus propios planes de qué hacer después de activar el evento.</p>
<p>Al llamar a <code>event.preventDefault()</code>, un controlador de eventos puede enviar una señal de que esas acciones deben cancelarse.</p>
<p>En ese caso, la llamada a <code>elem.dispatchEvent(event)</code> devuelve <code>false</code>. Y el código que lo envió sabe que no debería continuar.</p>
<p>Veamos un ejemplo práctico: un conejo escondido (podría ser un menú de cierre u otra cosa).</p>
<p>A continuación puede ver una función <code>#rabbit</code> y <code>hide()</code> que distribuye el evento <code>&quot;hide&quot;</code> en él, para que todas las partes interesadas sepan que el conejo se va a esconder.</p>
<p>Cualquier controlador puede escuchar ese evento con <code>rabbit.addEventListener('hide', ...)</code> y, si es necesario, cancelar la acción usando <code>event.preventDefault()</code>. Entonces el conejo no desaparecerá:</p>
<div id="32va0s4htw" data-trusted="1" class="code-example" data-refresh="1" data-autorun="true">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;pre id=&quot;rabbit&quot;&gt;
  |\   /|
   \|_|/
   /. .\
  =\_Y_/=
   {&gt;o&lt;}
&lt;/pre&gt;
&lt;button onclick=&quot;hide()&quot;&gt;Esconder()&lt;/button&gt;

&lt;script&gt;
  // hide() será llamado automáticamente en 2 segundos.
  function hide() {
    let event = new CustomEvent(&quot;hide&quot;, {
      cancelable: true // sin esa bandera preventDefault no funciona
    });
    if (!rabbit.dispatchEvent(event)) {
      alert('La acción fue impedida por un controlador');
    } else {
      rabbit.hidden = true;
    }
  }

  rabbit.addEventListener('hide', function(event) {
    if (confirm(&quot;¿Llamar a preventDefault?&quot;)) {
      event.preventDefault();
    }
  });
&lt;/script&gt;</code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe
            class="code-result__iframe"
            name="test-32va0s4htw"
            style="height:200px"
            src="about:blank"></iframe>
        </div>
      </div><p>Tenga en cuenta: el evento debe tener la bandera <code>cancelable: true</code>, de lo contrario, la llamada <code>event.preventDefault()</code> se ignora.</p>
<h2><a class="main__anchor" name="los-eventos-dentro-de-eventos-son-sincronicos" href="#los-eventos-dentro-de-eventos-son-sincronicos">Los eventos dentro de eventos son sincrónicos</a></h2><p>Usualmente los eventos se procesan en una cola. Por ejemplo: si el navegador está procesando <code>onclick</code> y ocurre un nuevo evento porque el mouse se movió, entonces el manejo de este último se pone en cola, y el controlador correspondiente <code>mousemove</code> será llamado cuando el procesamiento de <code>onclick</code> haya terminado.</p>
<p>La excepción notable es cuando un evento se inicia desde dentro de otro, por ejemplo, usando <code>dispatchEvent</code>. Dichos eventos se procesan inmediatamente: se llaman los nuevos controladores de eventos y luego se reanuda el manejo de eventos actual.</p>
<p>Por ejemplo, en el código siguiente, el evento <code>menu-open</code> se activa durante el <code>onclick</code>.</p>
<p>Se procesa inmediatamente, sin esperar a que termine el controlador <code>onclick</code>:</p>
<div id="50ndd089w8" data-trusted="1" class="code-example" data-autorun="true">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;button id=&quot;menu&quot;&gt;Menu (dame clic)&lt;/button&gt;

&lt;script&gt;
  menu.onclick = function() {
    alert(1);

    menu.dispatchEvent(new CustomEvent(&quot;menu-open&quot;, {
      bubbles: true
    }));

    alert(2);
  };

  // se dispara entre 1 y 2
  document.addEventListener('menu-open', () =&gt; alert('anidado'));
&lt;/script&gt;</code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe
            class="code-result__iframe"
            name="test-50ndd089w8"
            style="height:200px"
            src="about:blank"></iframe>
        </div>
      </div><p>El orden de salida es: 1 → anidado → 2.</p>
<p>Tenga en cuenta que el evento anidado <code>menu-open</code> se captura en <code>document</code>. La propagación y el manejo del evento anidado finaliza antes de que el procesamiento vuelva al código externo (<code>onclick</code>).</p>
<p>No se trata solo de <code>dispatchEvent</code>, hay otros casos. Si un controlador de eventos llama a métodos que desencadenan otros eventos, también se procesan sincrónicamente, de forma anidada.</p>
<p>Supongamos que no nos gusta. Querríamos que <code>onclick</code> se procesara por completo primero, independientemente de <code>menu-open</code> o cualquier otro evento anidado.</p>
<p>Entonces podemos poner el <code>dispatchEvent</code> (u otra llamada de activación de eventos) al final de <code>onclick</code> o, mejor aún, envolverlo en el <code>setTimeout</code> de retardo cero:</p>
<div id="j6lmti4xw9" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="mostrar" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="abrir en entorno controlado" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;button id=&quot;menu&quot;&gt;Menu (dame clic)&lt;/button&gt;

&lt;script&gt;
  menu.onclick = function() {
    alert(1);

    setTimeout(() =&gt; menu.dispatchEvent(new CustomEvent(&quot;menu-open&quot;, {
      bubbles: true
    })));

    alert(2);
  };

  document.addEventListener('menu-open', () =&gt; alert('anidado'));
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>Ahora <code>dispatchEvent</code> se ejecuta asincrónicamente después de que la ejecución del código actual finaliza, incluyendo <code>menu.onclick</code>. Los controladores de eventos están totalmente separados.</p>
<p>El orden de salida se convierte en: 1 → 2 → anidado.</p>
<h2><a class="main__anchor" name="resumen" href="#resumen">Resumen</a></h2><p>Para generar un evento a partir del código, primero necesitamos crear un objeto de evento.</p>
<p>El constructor genérico <code>Event(name, options)</code> acepta un nombre de evento arbitrario y el objeto <code>options</code> con dos propiedades:</p>
<ul>
<li><code>bubbles: true</code> si el evento debe propagarse.</li>
<li><code>cancelable: true</code> si <code>event.preventDefault()</code> debe funcionar.</li>
</ul>
<p>Otros constructores de eventos nativos como <code>MouseEvent</code>, <code>KeyboardEvent</code>, y similares, aceptan propiedades específicas para ese tipo de evento. Por ejemplo, <code>clientX</code> para eventos de mouse.</p>
<p>Para eventos personalizados deberíamos usar el constructor <code>CustomEvent</code>. Este tiene una opción adicional llamada <code>detail</code> a la que podemos asignarle los datos específicos del evento. De esta forma, todos los controladores pueden accederlos como <code>event.detail</code>.</p>
<p>A pesar de la posibilidad técnica de generar eventos del navegador como <code>click</code> o <code>keydown</code>, debemos usarlo con mucho cuidado.</p>
<p>No deberíamos generar eventos de navegador, ya que es una forma trillada de ejecutar controladores. Esa es una mala arquitectura la mayor parte del tiempo.</p>
<p>Se pueden generar eventos nativos:</p>
<ul>
<li>Como un truco sucio para hacer que las bibliotecas de terceros funcionen de la manera necesaria, si  es que ellas no proporcionan otros medios de interacción.</li>
<li>Para pruebas automatizadas, que el script “haga clic en el botón” y vea si la interfaz reacciona correctamente.</li>
</ul>
<p>Los eventos personalizados con nuestros propios nombres a menudo se generan con fines arquitectónicos, para señalar lo que sucede dentro de nuestros menús, controles deslizantes, carruseles, etc.</p>
</div></article></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="default-browser-action.html" data-tooltip="Acciones predeterminadas del navegador"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Lección anterior</span></a><a class="page__nav page__nav_next" href="event-details.html" data-tooltip="Eventos en la UI"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Próxima lección</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Compartir</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Mapa del Tutorial</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">Comentarios</a></h2><div class="comments__read-before"><span class="comments__read-before-link">lea esto antes de comentar…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>Si tiene sugerencias sobre qué mejorar, por favor <a href="https://github.com/javascript-tutorial/en.javascript.info/issues/new">enviar una propuesta de GitHub</a> o una solicitud de extracción en lugar de comentar.</li><li>Si no puede entender algo en el artículo, por favor explique.</li><li>Para insertar algunas palabras de código, use la etiqueta <code>&lt;code&gt;</code>, para varias líneas – envolverlas en la etiqueta <code>&lt;pre&gt;</code>, para más de 10 líneas – utilice una entorno controlado (sandbox) (<a href='https://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='https://jsbin.com/'>jsbin</a>, <a href='http://codepen.io/'>codepen</a>…)</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/es.javascript.info\/dispatch-events","identifier":"\/dispatch-events"}); };</script><script>var disqus_shortname = "es-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="tutorial/map.html" data-action="tutorial-map" data-tooltip="Mapa del Tutorial"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Capítulo</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="events.html">Introducción a los eventos</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Navegación de lección</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#constructor-de-eventos">Constructor de eventos</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#dispatchevent">dispatchEvent</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#ejemplo-de-bubbling">Ejemplo de Bubbling</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#mouseevent-keyboardevent-y-otros">MouseEvent, KeyboardEvent y otros</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#eventos-personalizados">Eventos personalizados</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#event-preventdefault">event.preventDefault()</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#los-eventos-dentro-de-eventos-son-sincronicos">Los eventos dentro de eventos son sincrónicos</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#resumen">Resumen</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">Comentarios</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Compartir</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fes.javascript.info%2Fdispatch-events" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/es.javascript.info/blob/master/2-ui/2-events/05-dispatch-events" rel="nofollow">Editar en GitHub</a></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2023&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="about.html">acerca del proyecto</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="about.html#contact-us">contáctenos</a></li></ul></div></body>
<!-- Mirrored from es.javascript.info/dispatch-events by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Feb 2023 21:14:32 GMT -->
</html>